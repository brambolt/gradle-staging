
task runSimple(type: Exec) {
  workingDir = new File(project.projectDir, 'simple')
  commandLine(['../../gradlew', 'all', '--info', '--stacktrace', '--no-daemon',
               "-PbramboltRelease=UNKNOWN",
               "-PbramboltVersion=${bramboltVersion}",
               "-PbuildNumber=SNAPSHOT"])
  doFirst {
    new File(workingDir, 'build').delete()
  }
}

task runWithDefaults(type: Exec) {
  workingDir = new File(project.projectDir, 'with-defaults')
  commandLine(['../../gradlew', 'all', '--info', '--stacktrace', '--no-daemon',
               "-PbramboltRelease=UNKNOWN",
               "-PbramboltVersion=${bramboltVersion}",
               "-PbuildNumber=SNAPSHOT"])
  doFirst {
    new File(workingDir, 'build').delete()
  }
}

task runWithEnvironments(type: Exec) {
  workingDir = new File(project.projectDir, 'with-environments')
  commandLine(['../../gradlew', 'all', '--info', '--stacktrace', '--no-daemon',
               "-PbramboltRelease=UNKNOWN",
               "-PbramboltVersion=${bramboltVersion}",
               "-PbuildNumber=SNAPSHOT"])
}

task runWithTargets(type: Exec) {
  workingDir = new File(project.projectDir, 'with-targets')
  commandLine(['../../gradlew', 'all', '--info', '--stacktrace', '--no-daemon',
               "-PbramboltRelease=UNKNOWN",
               "-PbramboltVersion=${bramboltVersion}",
               "-PbuildNumber=SNAPSHOT"])
}

task runWithTemplateTree(type: Exec) {
  workingDir = new File(project.projectDir, 'with-template-tree')
  commandLine(['../../gradlew', 'all', '--info', '--stacktrace', '--no-daemon',
               "-PbramboltRelease=UNKNOWN",
               "-PbramboltVersion=${bramboltVersion}",
               "-PbuildNumber=SNAPSHOT"])
}

task runAll {
  dependsOn(runSimple)
  dependsOn(runWithDefaults)
  dependsOn(runWithEnvironments)
  dependsOn(runWithTargets)
  dependsOn(runWithTemplateTree)
}
